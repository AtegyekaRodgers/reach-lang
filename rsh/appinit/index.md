[{"bookPath":"","title":"Application Initialization","titleId":"ref-programs-appinit","hasOtp":true,"hasPageHeader":true},"<p>\n  <i id=\"p_0\" class=\"pid\"></i>The body of <span class=\"snip\"><a href=\"/rsh/module/#rsh_Reach\" title=\"rsh: Reach\"><span style=\"color: var(--shiki-token-constant)\">Reach</span></a><span style=\"color: var(--shiki-color-text)\">.app</span></span> is an <span class=\"term\" id=\"term_application%20initialization\">application initialization</span>.\n  It defines the various participants and views of the DApp, as well as sets compilation options.\n  It is finalized with <span class=\"snip\"><a href=\"/rsh/appinit/#rsh_init\" title=\"rsh: init\"><span style=\"color: var(--shiki-token-function)\">init</span></a><span style=\"color: var(--shiki-color-text)\">()</span></span> and then the application begins in a step.<a href=\"#p_0\" class=\"pid\">0</a>\n</p>\n<h2 id=\"ref-programs-appinit-stmts\" class=\"refHeader\">Statements<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#ref-programs-appinit-stmts\"><span class=\"icon icon-link\"></span></a></h2>\n<p>\n  <i id=\"p_1\" class=\"pid\"></i>Any statements valid for a <a href=\"/rsh/compute/#ref-programs-compute-stmts\">computation</a> are valid for application initialization.\n  However, some additional statements are allowed.<a href=\"#p_1\" class=\"pid\">1</a>\n</p>\n<h3 id=\"init\" class=\"refHeader\"><code>init</code><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#init\"><span class=\"icon icon-link\"></span></a></h3>\n<pre class=\"snippet unnumbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"init();\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\"><a href=\"/rsh/appinit/#rsh_init\" title=\"rsh: init\"><span style=\"color: var(--shiki-token-function)\">init</span></a><span style=\"color: var(--shiki-color-text)\">();</span></li></ol></pre>\n<p><i id=\"p_2\" class=\"pid\"></i><span class=\"ref\" id=\"rsh_init\" data-scope=\"rsh\" data-symbol=\"init\"></span>A <span class=\"term\" id=\"term_init%20statement\">init statement</span>, written <span class=\"snip\"><a href=\"/rsh/appinit/#rsh_init\" title=\"rsh: init\"><span style=\"color: var(--shiki-token-function)\">init</span></a><span style=\"color: var(--shiki-color-text)\">();</span></span>, finalizes all of the available participants, views, and compilation options.<a href=\"#p_2\" class=\"pid\">2</a></p>\n<p>\n  <i id=\"p_3\" class=\"pid\"></i><span class=\"ref\" id=\"rsh_deploy\" data-scope=\"rsh\" data-symbol=\"deploy\"></span>In earlier versions of Reach, this was called <span class=\"snip\"><a href=\"/rsh/appinit/#rsh_deploy\" title=\"rsh: deploy\"><span style=\"color: var(--shiki-token-function)\">deploy</span></a><span style=\"color: var(--shiki-color-text)\">()</span></span>, but it was\n  changed because that name was misleading.<a href=\"#p_3\" class=\"pid\">3</a>\n</p>\n<p>\n  <i id=\"p_4\" class=\"pid\"></i>Its continuation is a step, which means its content is specified by <a href=\"/rsh/step/#ref-programs-step\">Steps</a>.\n  It represents the body of the DApp to be compiled.<a href=\"#p_4\" class=\"pid\">4</a>\n</p>\n<h3 id=\"setoptions\" class=\"refHeader\"><code>setOptions</code><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#setoptions\"><span class=\"icon icon-link\"></span></a></h3>\n<p><span class=\"ref\" id=\"rsh_setOptions\" data-scope=\"rsh\" data-symbol=\"setOptions\"></span></p>\n<pre class=\"snippet numbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"setOptions({ verifyArithmetic: true });\nsetOptions({});\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\"><a href=\"/rsh/appinit/#rsh_setOptions\" title=\"rsh: setOptions\"><span style=\"color: var(--shiki-token-function)\">setOptions</span></a><span style=\"color: var(--shiki-color-text)\">({ verifyArithmetic</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/compute/#rsh_true\" title=\"rsh: true\"><span style=\"color: var(--shiki-token-constant)\">true</span></a><span style=\"color: var(--shiki-color-text)\"> });</span></li><li value=\"2\"><a href=\"/rsh/appinit/#rsh_setOptions\" title=\"rsh: setOptions\"><span style=\"color: var(--shiki-token-function)\">setOptions</span></a><span style=\"color: var(--shiki-color-text)\">({});</span></li></ol></pre>\n<p><i id=\"p_5\" class=\"pid\"></i>The <span class=\"term\" id=\"term_compilation%20options\">compilation options</span> for the DApp may be set by calling <span class=\"snip\"><a href=\"/rsh/appinit/#rsh_setOptions\" title=\"rsh: setOptions\"><span style=\"color: var(--shiki-token-function)\">setOptions</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-constant)\">OBJ_EXPR</span><span style=\"color: var(--shiki-color-text)\">);</span></span> where <span class=\"snip\"><span style=\"color: var(--shiki-token-constant)\">OBJ_EXPR</span></span> is an object with the following keys and values:<a href=\"#p_5\" class=\"pid\">5</a></p>\n<ul>\n  <li>\n    <p><i id=\"p_6\" class=\"pid\"></i><span class=\"ref\" id=\"rsh_untrustworthyMaps\" data-scope=\"rsh\" data-symbol=\"untrustworthyMaps\"></span><span class=\"snip\"><a href=\"/rsh/appinit/#rsh_untrustworthyMaps\" title=\"rsh: untrustworthyMaps\"><span style=\"color: var(--shiki-color-text)\">untrustworthyMaps</span></a></span><a href=\"#p_6\" class=\"pid\">6</a></p>\n    <p><i id=\"p_7\" class=\"pid\"></i><span class=\"snip\"><a href=\"/rsh/compute/#rsh_true\" title=\"rsh: true\"><span style=\"color: var(--shiki-token-constant)\">true</span></a></span> or <span class=\"snip\"><a href=\"/rsh/compute/#rsh_false\" title=\"rsh: false\"><span style=\"color: var(--shiki-token-constant)\">false</span></a></span> (default)<a href=\"#p_7\" class=\"pid\">7</a></p>\n    <p>\n      <i id=\"p_8\" class=\"pid\"></i>Determines whether mappings are treated as trustworthy.\n      A mapping is trustworthy if its values are guaranteed to be preserved across interactions.\n      When this is <span class=\"snip\"><a href=\"/rsh/compute/#rsh_true\" title=\"rsh: true\"><span style=\"color: var(--shiki-token-constant)\">true</span></a></span>, the verifier will enforce that your program does not rely on values being preserved.<a href=\"#p_8\" class=\"pid\">8</a>\n    </p>\n    <p>\n      <i id=\"p_9\" class=\"pid\"></i>Reach cannot provide trustworthy mappings with some connectors; therefore it is dangerous to not set this to <span class=\"snip\"><a href=\"/rsh/compute/#rsh_true\" title=\"rsh: true\"><span style=\"color: var(--shiki-token-constant)\">true</span></a></span> on such connectors.\n      Reach will emit a warning during compilation if you do such a dangerous thing.<a href=\"#p_9\" class=\"pid\">9</a>\n    </p>\n  </li>\n  <li>\n    <p><i id=\"p_10\" class=\"pid\"></i><span class=\"ref\" id=\"rsh_verifyArithmetic\" data-scope=\"rsh\" data-symbol=\"verifyArithmetic\"></span><span class=\"snip\"><a href=\"/rsh/appinit/#rsh_verifyArithmetic\" title=\"rsh: verifyArithmetic\"><span style=\"color: var(--shiki-color-text)\">verifyArithmetic</span></a></span><a href=\"#p_10\" class=\"pid\">10</a></p>\n    <p><i id=\"p_11\" class=\"pid\"></i><span class=\"snip\"><a href=\"/rsh/compute/#rsh_true\" title=\"rsh: true\"><span style=\"color: var(--shiki-token-constant)\">true</span></a></span> or <span class=\"snip\"><a href=\"/rsh/compute/#rsh_false\" title=\"rsh: false\"><span style=\"color: var(--shiki-token-constant)\">false</span></a></span> (default)<a href=\"#p_11\" class=\"pid\">11</a></p>\n    <p>\n      <i id=\"p_12\" class=\"pid\"></i>Determines whether arithmetic operations automatically introduce static assertions that they do not overflow beyond <span class=\"snip\"><a href=\"/rsh/compute/#rsh_UInt\" title=\"rsh: UInt\"><span style=\"color: var(--shiki-token-constant)\">UInt</span></a><a href=\"/rsh/compute/#rsh_UInt.max\" title=\"rsh: UInt.max\"><span style=\"color: var(--shiki-color-text)\">.max</span></a></span>.\n      This defaults to <span class=\"snip\"><a href=\"/rsh/compute/#rsh_false\" title=\"rsh: false\"><span style=\"color: var(--shiki-token-constant)\">false</span></a></span>, because it is onerous to verify.\n      We recommend turning it on before final deployment, but leaving it off during development.\n      When it is <span class=\"snip\"><a href=\"/rsh/compute/#rsh_false\" title=\"rsh: false\"><span style=\"color: var(--shiki-token-constant)\">false</span></a></span>, connectors will ensure that overflows do not actually occur on the network.<a href=\"#p_12\" class=\"pid\">12</a>\n    </p>\n  </li>\n  <li>\n    <p><i id=\"p_13\" class=\"pid\"></i><span class=\"ref\" id=\"rsh_verifyPerConnector\" data-scope=\"rsh\" data-symbol=\"verifyPerConnector\"></span><span class=\"snip\"><a href=\"/rsh/appinit/#rsh_verifyPerConnector\" title=\"rsh: verifyPerConnector\"><span style=\"color: var(--shiki-color-text)\">verifyPerConnector</span></a></span><a href=\"#p_13\" class=\"pid\">13</a></p>\n    <p><i id=\"p_14\" class=\"pid\"></i><span class=\"snip\"><a href=\"/rsh/compute/#rsh_true\" title=\"rsh: true\"><span style=\"color: var(--shiki-token-constant)\">true</span></a></span> or <span class=\"snip\"><a href=\"/rsh/compute/#rsh_false\" title=\"rsh: false\"><span style=\"color: var(--shiki-token-constant)\">false</span></a></span> (default)<a href=\"#p_14\" class=\"pid\">14</a></p>\n    <p>\n      <i id=\"p_15\" class=\"pid\"></i>Determines whether verification is done per connector, or once for a generic connector.\n      When this is <span class=\"snip\"><a href=\"/rsh/compute/#rsh_true\" title=\"rsh: true\"><span style=\"color: var(--shiki-token-constant)\">true</span></a></span>, then connector-specific constants, like <span class=\"snip\"><a href=\"/rsh/compute/#rsh_UInt\" title=\"rsh: UInt\"><span style=\"color: var(--shiki-token-constant)\">UInt</span></a><a href=\"/rsh/compute/#rsh_UInt.max\" title=\"rsh: UInt.max\"><span style=\"color: var(--shiki-color-text)\">.max</span></a></span>, will be instantiated to literal numbers.\n      This concretization of these constants can induce performance degradation in the verifier.<a href=\"#p_15\" class=\"pid\">15</a>\n    </p>\n  </li>\n  <li>\n    <p><i id=\"p_16\" class=\"pid\"></i><span class=\"ref\" id=\"rsh_connectors\" data-scope=\"rsh\" data-symbol=\"connectors\"></span><span class=\"snip\"><a href=\"/rsh/appinit/#rsh_connectors\" title=\"rsh: connectors\"><span style=\"color: var(--shiki-color-text)\">connectors</span></a></span><a href=\"#p_16\" class=\"pid\">16</a></p>\n    <p><i id=\"p_17\" class=\"pid\"></i><span class=\"ref\" id=\"rsh_ETH\" data-scope=\"rsh\" data-symbol=\"ETH\"></span><span class=\"ref\" id=\"rsh_ALGO\" data-scope=\"rsh\" data-symbol=\"ALGO\"></span><span class=\"snip\"><span style=\"color: var(--shiki-color-text)\">[</span><a href=\"/rsh/appinit/#rsh_ETH\" title=\"rsh: ETH\"><span style=\"color: var(--shiki-token-constant)\">ETH</span></a><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/appinit/#rsh_ALGO\" title=\"rsh: ALGO\"><span style=\"color: var(--shiki-token-constant)\">ALGO</span></a><span style=\"color: var(--shiki-color-text)\">]</span></span> (default)<a href=\"#p_17\" class=\"pid\">17</a></p>\n    <p>\n      <i id=\"p_18\" class=\"pid\"></i>A tuple of the connectors that the application should be compiled for.\n      By default, all available connectors are chosen.<a href=\"#p_18\" class=\"pid\">18</a>\n    </p>\n  </li>\n</ul>\n<h2 id=\"ref-programs-appinit-exprs\" class=\"refHeader\">Expressions<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#ref-programs-appinit-exprs\"><span class=\"icon icon-link\"></span></a></h2>\n<p>\n  <i id=\"p_19\" class=\"pid\"></i>Any expressions valid for a <a href=\"/rsh/appinit/#ref-programs-appinit-exprs\">computation</a> are valid for application initialization.\n  However, some additional expressions are allowed.<a href=\"#p_19\" class=\"pid\">19</a>\n</p>\n<h3 id=\"participant-definition\" class=\"refHeader\">Participant Definition<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#participant-definition\"><span class=\"icon icon-link\"></span></a></h3>\n<p><i id=\"p_20\" class=\"pid\"></i>A participant and participant class may be declared with<a href=\"#p_20\" class=\"pid\">20</a></p>\n<p><span class=\"ref\" id=\"rsh_Participant\" data-scope=\"rsh\" data-symbol=\"Participant\"></span></p>\n<pre class=\"snippet unnumbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"Participant(participantName, participantInteractInterface)\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\"><a href=\"/rsh/appinit/#rsh_Participant\" title=\"rsh: Participant\"><span style=\"color: var(--shiki-token-function)\">Participant</span></a><span style=\"color: var(--shiki-color-text)\">(participantName</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> participantInteractInterface)</span></li></ol></pre>\n<p><i id=\"p_21\" class=\"pid\"></i>and<a href=\"#p_21\" class=\"pid\">21</a></p>\n<p><span class=\"ref\" id=\"rsh_ParticipantClass\" data-scope=\"rsh\" data-symbol=\"ParticipantClass\"></span></p>\n<pre class=\"snippet unnumbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"ParticipantClass(participantName, participantInteractInterface)\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\"><a href=\"/rsh/appinit/#rsh_ParticipantClass\" title=\"rsh: ParticipantClass\"><span style=\"color: var(--shiki-token-function)\">ParticipantClass</span></a><span style=\"color: var(--shiki-color-text)\">(participantName</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> participantInteractInterface)</span></li></ol></pre>\n<p><i id=\"p_22\" class=\"pid\"></i>respectively.<a href=\"#p_22\" class=\"pid\">22</a></p>\n<p>\n  <i id=\"p_23\" class=\"pid\"></i><span class=\"snip\"><span style=\"color: var(--shiki-color-text)\">participantName</span></span> is a string which indicates the name of the participant function in the generated backend code.\n  Each <span class=\"snip\"><span style=\"color: var(--shiki-color-text)\">participantName</span></span> must be unique.<a href=\"#p_23\" class=\"pid\">23</a>\n</p>\n<p><i id=\"p_24\" class=\"pid\"></i><span class=\"snip\"><span style=\"color: var(--shiki-color-text)\">participantInteractInterface</span></span> is a <span class=\"term\" id=\"term_participant%20interact%20interface\">participant interact interface</span>, an object where each field indicates the type of a function or value which must be provided to the backend by the frontend for interacting with the participant.<a href=\"#p_24\" class=\"pid\">24</a></p>\n<p><i id=\"p_25\" class=\"pid\"></i>In the <a href=\"/tut/rps/#tut-3\">Rock, Paper, and Scissors</a> tutorial, Alice and Bob receive the <code>getHand</code> and <code>seeOutcome</code> interact interfaces from the construct <code>Player</code> in the following sample code:<a href=\"#p_25\" class=\"pid\">25</a></p>\n<pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/rps-2-rps/index.rsh\">/examples/rps-2-rps/index.rsh</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"'reach 0.1';\n\nconst Player = {\n  getHand: Fun([], UInt),\n  seeOutcome: Fun([UInt], Null),\n};\n\nexport const main = Reach.App(() => {\n  const Alice = Participant('Alice', {\n    ...Player,\n  });\n  const Bob   = Participant('Bob', {\n    ...Player,\n  });\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\"><span style=\"color: var(--shiki-token-string-expression)\">'reach 0.1'</span><span style=\"color: var(--shiki-color-text)\">;</span></li><li value=\"2\"></li><li value=\"3\"><a href=\"/rsh/compute/#rsh_const\" title=\"rsh: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">Player</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"4\"><span style=\"color: var(--shiki-color-text)\">  getHand</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/compute/#rsh_Fun\" title=\"rsh: Fun\"><span style=\"color: var(--shiki-token-function)\">Fun</span></a><span style=\"color: var(--shiki-color-text)\">([]</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> UInt)</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"5\"><span style=\"color: var(--shiki-color-text)\">  seeOutcome</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/compute/#rsh_Fun\" title=\"rsh: Fun\"><span style=\"color: var(--shiki-token-function)\">Fun</span></a><span style=\"color: var(--shiki-color-text)\">([UInt]</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> Null)</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"6\"><span style=\"color: var(--shiki-color-text)\">};</span></li><li value=\"7\"></li><li value=\"8\"><a href=\"/rsh/module/#rsh_export\" title=\"rsh: export\"><span style=\"color: var(--shiki-token-keyword)\">export</span></a><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/compute/#rsh_const\" title=\"rsh: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">main</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/module/#rsh_Reach\" title=\"rsh: Reach\"><span style=\"color: var(--shiki-token-constant)\">Reach</span></a><a href=\"/rsh/module/#rsh_Reach.App\" title=\"rsh: Reach.App\"><span style=\"color: var(--shiki-token-function)\">.App</span></a><span style=\"color: var(--shiki-color-text)\">(() </span><a href=\"/rsh/compute/#rsh_=%3E\" title=\"rsh: =>\"><span style=\"color: var(--shiki-token-keyword)\">=&gt;</span></a><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"9\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/compute/#rsh_const\" title=\"rsh: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">Alice</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/appinit/#rsh_Participant\" title=\"rsh: Participant\"><span style=\"color: var(--shiki-token-function)\">Participant</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">'Alice'</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"10\"><span style=\"color: var(--shiki-color-text)\">    </span><span style=\"color: var(--shiki-token-keyword)\">...</span><span style=\"color: var(--shiki-color-text)\">Player</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"11\"><span style=\"color: var(--shiki-color-text)\">  });</span></li><li value=\"12\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/compute/#rsh_const\" title=\"rsh: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">Bob</span><span style=\"color: var(--shiki-color-text)\">   </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/appinit/#rsh_Participant\" title=\"rsh: Participant\"><span style=\"color: var(--shiki-token-function)\">Participant</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">'Bob'</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"13\"><span style=\"color: var(--shiki-color-text)\">    </span><span style=\"color: var(--shiki-token-keyword)\">...</span><span style=\"color: var(--shiki-color-text)\">Player</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"14\"><span style=\"color: var(--shiki-color-text)\">  });</span></li></ol></pre>\n<h3 id=\"ref-programs-appinit-api\" class=\"refHeader\">API Definition<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#ref-programs-appinit-api\"><span class=\"icon icon-link\"></span></a></h3>\n<p><span class=\"ref\" id=\"rsh_API\" data-scope=\"rsh\" data-symbol=\"API\"></span></p>\n<pre class=\"snippet numbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"API('Voter', { vote: Fun([Address], UInt) })\n// or\nAPI({ vote: Fun([Address], UInt) })\n// or\nAPI('Voter', { vote: Fun([Address], UInt)}, { vote: &quot;castVote&quot; })\n// or\nAPI({ add2: Fun([UInt, UInt], UInt), add1: Fun([UInt], UInt) }, { add1: &quot;add&quot;, add2: &quot;add })\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\"><a href=\"/rsh/appinit/#rsh_API\" title=\"rsh: API\"><span style=\"color: var(--shiki-token-function)\">API</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">'Voter'</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> { vote</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/compute/#rsh_Fun\" title=\"rsh: Fun\"><span style=\"color: var(--shiki-token-function)\">Fun</span></a><span style=\"color: var(--shiki-color-text)\">([Address]</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> UInt) })</span></li><li value=\"2\"><span style=\"color: var(--shiki-token-comment)\">// or</span></li><li value=\"3\"><a href=\"/rsh/appinit/#rsh_API\" title=\"rsh: API\"><span style=\"color: var(--shiki-token-function)\">API</span></a><span style=\"color: var(--shiki-color-text)\">({ vote</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/compute/#rsh_Fun\" title=\"rsh: Fun\"><span style=\"color: var(--shiki-token-function)\">Fun</span></a><span style=\"color: var(--shiki-color-text)\">([Address]</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> UInt) })</span></li><li value=\"4\"><span style=\"color: var(--shiki-token-comment)\">// or</span></li><li value=\"5\"><a href=\"/rsh/appinit/#rsh_API\" title=\"rsh: API\"><span style=\"color: var(--shiki-token-function)\">API</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">'Voter'</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> { vote</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/compute/#rsh_Fun\" title=\"rsh: Fun\"><span style=\"color: var(--shiki-token-function)\">Fun</span></a><span style=\"color: var(--shiki-color-text)\">([Address]</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> UInt)}</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> { vote</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">\"castVote\"</span><span style=\"color: var(--shiki-color-text)\"> })</span></li><li value=\"6\"><span style=\"color: var(--shiki-token-comment)\">// or</span></li><li value=\"7\"><a href=\"/rsh/appinit/#rsh_API\" title=\"rsh: API\"><span style=\"color: var(--shiki-token-function)\">API</span></a><span style=\"color: var(--shiki-color-text)\">({ add2</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/compute/#rsh_Fun\" title=\"rsh: Fun\"><span style=\"color: var(--shiki-token-function)\">Fun</span></a><span style=\"color: var(--shiki-color-text)\">([UInt</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> UInt]</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> UInt)</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> add1</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/compute/#rsh_Fun\" title=\"rsh: Fun\"><span style=\"color: var(--shiki-token-function)\">Fun</span></a><span style=\"color: var(--shiki-color-text)\">([UInt]</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> UInt) }</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> { add1</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">\"add\"</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> add2</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-string-expression)\">\"add })</span></li></ol></pre>\n<p><i id=\"p_26\" class=\"pid\"></i>APIs are functions that can be called by other contracts, as well as off-chain.<a href=\"#p_26\" class=\"pid\">26</a></p>\n<p>\n  <i id=\"p_27\" class=\"pid\"></i>An API is defined with <span class=\"snip\"><a href=\"/rsh/appinit/#rsh_API\" title=\"rsh: API\"><span style=\"color: var(--shiki-token-function)\">API</span></a><span style=\"color: var(--shiki-color-text)\">(apiName</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> apiInterface</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/compute/#rsh_?\" title=\"rsh: ?\"><span style=\"color: var(--shiki-token-keyword)\">?</span></a><span style=\"color: var(--shiki-color-text)\">apiAlias)</span></span> or <span class=\"snip\"><a href=\"/rsh/appinit/#rsh_API\" title=\"rsh: API\"><span style=\"color: var(--shiki-token-function)\">API</span></a><span style=\"color: var(--shiki-color-text)\">(apiInterface</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/compute/#rsh_?\" title=\"rsh: ?\"><span style=\"color: var(--shiki-token-keyword)\">?</span></a><span style=\"color: var(--shiki-color-text)\">apiAlias)</span></span>, where <span class=\"snip\"><span style=\"color: var(--shiki-color-text)\">apiName</span></span> is a string that labels the API, <span class=\"snip\"><span style=\"color: var(--shiki-color-text)\">apiInterface</span></span> is an object where each field indicates the type of a function provided by the contract as an API, and <span class=\"snip\"><span style=\"color: var(--shiki-color-text)\">apiAlias</span></span> is an optional object that maps function names from the <span class=\"snip\"><span style=\"color: var(--shiki-color-text)\">apiInterface</span></span> to an alias.\n  This <span class=\"term\" id=\"term_function%20alias\">function alias</span> allows overloaded methods to be created.\n  Many functions may map to the same alias as long as each function domain is unique.\n  These APIs are available in frontends via the <span class=\"snip\"><span style=\"color: var(--shiki-token-constant)\">ctc</span><span style=\"color: var(--shiki-color-text)\">.apis</span></span> object, wherein fields are the members of <span class=\"snip\"><span style=\"color: var(--shiki-color-text)\">apiInterface</span></span> and may be used in <span class=\"snip\"><span style=\"color: var(--shiki-color-text)\">.api</span></span> components of <span class=\"snip\"><a href=\"/rsh/step/#rsh_fork\" title=\"rsh: fork\"><span style=\"color: var(--shiki-color-text)\">fork</span></a></span> and <span class=\"snip\"><a href=\"/rsh/consensus/#rsh_parallelReduce\" title=\"rsh: parallelReduce\"><span style=\"color: var(--shiki-color-text)\">parallelReduce</span></a></span> to specify the behavior of the corresponding call.\n  These are called <span class=\"term\" id=\"term_API%20member%20function\">API member function</span>s.\n  Each function must occur exactly once in the entire program.<a href=\"#p_27\" class=\"pid\">27</a>\n</p>\n<pre class=\"snippet numbered\"><div class=\"codeHeader\"><a href=\"https://github.com/reach-sh/reach-lang/tree/master/examples/dominant-assurance/index.rsh\">/examples/dominant-assurance/index.rsh</a><a class=\"far fa-copy copyBtn\" data-clipboard-text=\"  const I = API('Investor', {\n    invest: Fun([], Null),\n    collectFailPay: Fun([], Null),\n  });\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"24\"><span style=\"color: var(--shiki-color-text)\">  </span><a href=\"/rsh/compute/#rsh_const\" title=\"rsh: const\"><span style=\"color: var(--shiki-token-keyword)\">const</span></a><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-constant)\">I</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-keyword)\">=</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/appinit/#rsh_API\" title=\"rsh: API\"><span style=\"color: var(--shiki-token-function)\">API</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">'Investor'</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"25\"><span style=\"color: var(--shiki-color-text)\">    invest</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/compute/#rsh_Fun\" title=\"rsh: Fun\"><span style=\"color: var(--shiki-token-function)\">Fun</span></a><span style=\"color: var(--shiki-color-text)\">([]</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> Null)</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"26\"><span style=\"color: var(--shiki-color-text)\">    collectFailPay</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> </span><a href=\"/rsh/compute/#rsh_Fun\" title=\"rsh: Fun\"><span style=\"color: var(--shiki-token-function)\">Fun</span></a><span style=\"color: var(--shiki-color-text)\">([]</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> Null)</span><span style=\"color: var(--shiki-token-punctuation)\">,</span></li><li value=\"27\"><span style=\"color: var(--shiki-color-text)\">  });</span></li></ol></pre>\n<p>\n  <i id=\"p_28\" class=\"pid\"></i>This example creates an API that has a name of <code>Investor</code>, and it has two functions.\n  The first function is to invest in the contract, and the second function is to collect the payment if the <code>Entrepreneur</code> fails to form a quorum.<a href=\"#p_28\" class=\"pid\">28</a>\n</p>\n<h3 id=\"ref-programs-appinit-view\" class=\"refHeader\">View Definition<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#ref-programs-appinit-view\"><span class=\"icon icon-link\"></span></a></h3>\n<div class=\"note\">\n  <p><i id=\"p_29\" class=\"pid\"></i>This section is about defining views during application initialization. Views are <a href=\"/rsh/consensus/#ref-programs-consensus-view\">set in consensus steps</a>, in your Reach program. But, they are <a href=\"/frontend/#ref-frontends-js-ctc\">accessed by frontends</a> by using the Reach standard library of the frontend language, such as JavaScript.<a href=\"#p_29\" class=\"pid\">29</a></p>\n</div>\n<p><span class=\"ref\" id=\"rsh_View\" data-scope=\"rsh\" data-symbol=\"View\"></span></p>\n<pre class=\"snippet numbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"View('NFT', { owner: Address })\n// or\nView({ owner: Address })\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\"><a href=\"/rsh/appinit/#rsh_View\" title=\"rsh: View\"><span style=\"color: var(--shiki-token-function)\">View</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">'NFT'</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> { owner</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> Address })</span></li><li value=\"2\"><span style=\"color: var(--shiki-token-comment)\">// or</span></li><li value=\"3\"><a href=\"/rsh/appinit/#rsh_View\" title=\"rsh: View\"><span style=\"color: var(--shiki-token-function)\">View</span></a><span style=\"color: var(--shiki-color-text)\">({ owner</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> Address })</span></li></ol></pre>\n<p><i id=\"p_30\" class=\"pid\"></i>Views are read-only functions that can be called by other contracts, as well as off-chain.<a href=\"#p_30\" class=\"pid\">30</a></p>\n<p>\n  <i id=\"p_31\" class=\"pid\"></i>A view is defined with <span class=\"snip\"><a href=\"/rsh/appinit/#rsh_View\" title=\"rsh: View\"><span style=\"color: var(--shiki-token-function)\">View</span></a><span style=\"color: var(--shiki-color-text)\">(viewName</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> viewInterface)</span></span> or <span class=\"snip\"><a href=\"/rsh/appinit/#rsh_View\" title=\"rsh: View\"><span style=\"color: var(--shiki-token-function)\">View</span></a><span style=\"color: var(--shiki-color-text)\">(viewInterface)</span></span>, where <span class=\"snip\"><span style=\"color: var(--shiki-color-text)\">viewName</span></span> is a string that labels the view and <span class=\"snip\"><span style=\"color: var(--shiki-color-text)\">viewInterface</span></span> is an object where each field indicates the type of a function or value provided by the contract associated with the specified DApp.\n  These views are available in frontends via the <span class=\"snip\"><span style=\"color: var(--shiki-token-constant)\">ctc</span><span style=\"color: var(--shiki-color-text)\">.views</span></span> object.\n  In the DApp, the result of this application argument is referred to as a view object.<a href=\"#p_31\" class=\"pid\">31</a>\n</p>\n<h3 id=\"ref-programs-appinit-events\" class=\"refHeader\">Events Definition<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#ref-programs-appinit-events\"><span class=\"icon icon-link\"></span></a></h3>\n<p><span class=\"ref\" id=\"rsh_Events\" data-scope=\"rsh\" data-symbol=\"Events\"></span></p>\n<pre class=\"snippet numbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"Events('Logger', {\n  log: [UInt, Byte(64)]\n})\n// or\nEvents({\n  log: [UInt, Byte(64)]\n})\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\"><a href=\"/rsh/appinit/#rsh_Events\" title=\"rsh: Events\"><span style=\"color: var(--shiki-token-function)\">Events</span></a><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-string-expression)\">'Logger'</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> {</span></li><li value=\"2\"><span style=\"color: var(--shiki-color-text)\">  log</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> [UInt</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-function)\">Byte</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-constant)\">64</span><span style=\"color: var(--shiki-color-text)\">)]</span></li><li value=\"3\"><span style=\"color: var(--shiki-color-text)\">})</span></li><li value=\"4\"><span style=\"color: var(--shiki-token-comment)\">// or</span></li><li value=\"5\"><a href=\"/rsh/appinit/#rsh_Events\" title=\"rsh: Events\"><span style=\"color: var(--shiki-token-function)\">Events</span></a><span style=\"color: var(--shiki-color-text)\">({</span></li><li value=\"6\"><span style=\"color: var(--shiki-color-text)\">  log</span><span style=\"color: var(--shiki-token-keyword)\">:</span><span style=\"color: var(--shiki-color-text)\"> [UInt</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> </span><span style=\"color: var(--shiki-token-function)\">Byte</span><span style=\"color: var(--shiki-color-text)\">(</span><span style=\"color: var(--shiki-token-constant)\">64</span><span style=\"color: var(--shiki-color-text)\">)]</span></li><li value=\"7\"><span style=\"color: var(--shiki-color-text)\">})</span></li></ol></pre>\n<p>\n  <i id=\"p_32\" class=\"pid\"></i>An event is defined with <span class=\"snip\"><a href=\"/rsh/appinit/#rsh_Events\" title=\"rsh: Events\"><span style=\"color: var(--shiki-token-function)\">Events</span></a><span style=\"color: var(--shiki-color-text)\">(eventName</span><span style=\"color: var(--shiki-token-punctuation)\">,</span><span style=\"color: var(--shiki-color-text)\"> eventInterface)</span></span> or <span class=\"snip\"><a href=\"/rsh/appinit/#rsh_Events\" title=\"rsh: Events\"><span style=\"color: var(--shiki-token-function)\">Events</span></a><span style=\"color: var(--shiki-color-text)\">(eventInterface)</span></span>, where <span class=\"snip\"><span style=\"color: var(--shiki-color-text)\">eventName</span></span> is a string that labels the event and <span class=\"snip\"><span style=\"color: var(--shiki-color-text)\">eventInterface</span></span> is an object where each field is a <span class=\"snip\"><a href=\"/rsh/compute/#rsh_Tuple\" title=\"rsh: Tuple\"><span style=\"color: var(--shiki-color-text)\">Tuple</span></a></span> of <span class=\"snip\"><span style=\"color: var(--shiki-color-text)\">Type</span></span>s, representing the type of values that an event will emit.\n  These events are available in the frontends via the <span class=\"snip\"><span style=\"color: var(--shiki-token-constant)\">ctc</span><span style=\"color: var(--shiki-color-text)\">.events</span></span> object.\n  In the DApp, the result of this application argument is referred to as an event object.<a href=\"#p_32\" class=\"pid\">32</a>\n</p>","<ul><li class=\"dynamic\">\n    <a href=\"#ref-programs-appinit\">Application Initialization</a>\n    <ul class=\"dynamic\">\n      <li class=\"dynamic\">\n        <a href=\"#ref-programs-appinit-stmts\">Statements</a>\n        <ul class=\"dynamic\">\n          <li class=\"dynamic\"><a href=\"#init\"><code>init</code></a></li>\n          <li class=\"dynamic\"><a href=\"#setoptions\"><code>setOptions</code></a></li>\n        </ul>\n      </li>\n      <li class=\"dynamic\">\n        <a href=\"#ref-programs-appinit-exprs\">Expressions</a>\n        <ul class=\"dynamic\">\n          <li class=\"dynamic\"><a href=\"#participant-definition\">Participant Definition</a></li>\n          <li class=\"dynamic\"><a href=\"#ref-programs-appinit-api\">API Definition</a></li>\n          <li class=\"dynamic\"><a href=\"#ref-programs-appinit-view\">View Definition</a></li>\n          <li class=\"dynamic\"><a href=\"#ref-programs-appinit-events\">Events Definition</a></li>\n        </ul>\n      </li>\n    </ul>\n  </li></ul>"]