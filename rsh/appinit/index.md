[{"bookPath":"","title":"Application Initialization","titleId":"ref-programs-appinit","hasOtp":true,"hasPageHeader":true},"<p>\n  <i id=\"p_0\" class=\"pid\"></i>The body of <span class=\"snip\"><span style=\"color: #24292E\">Reach.app</span></span> is an <span class=\"term\" id=\"term_application%20initialization\">application initialization</span>.\n  It defines the various participants and views of the DApp, as well as sets compilation options.\n  It is finalized with <span class=\"snip\"><a href=\"/rsh/appinit/#rsh_init\" title=\"rsh: init\"><span style=\"color: #6F42C1\">init</span></a><span style=\"color: #24292E\">()</span></span> and then the application begins in a step.<a href=\"#p_0\" class=\"pid\">0</a>\n</p>\n<h2 id=\"ref-programs-appinit-stmts\" class=\"refHeader\">Statements<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#ref-programs-appinit-stmts\"><span class=\"icon icon-link\"></span></a></h2>\n<p>\n  <i id=\"p_1\" class=\"pid\"></i>Any statements valid for a <a href=\"/rsh/compute/#ref-programs-compute-stmts\">computation</a> are valid for application initialization.\n  However, some additional statements are allowed.<a href=\"#p_1\" class=\"pid\">1</a>\n</p>\n<h3 id=\"init\" class=\"refHeader\"><code>init</code><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#init\"><span class=\"icon icon-link\"></span></a></h3>\n<pre class=\"snippet unnumbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"init();\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\"><a href=\"/rsh/appinit/#rsh_init\" title=\"rsh: init\"><span style=\"color: #6F42C1\">init</span></a><span style=\"color: #24292E\">();</span></li></ol></pre>\n<p><i id=\"p_2\" class=\"pid\"></i><span class=\"ref\" id=\"rsh_init\" data-scope=\"rsh\" data-symbol=\"init\"></span>A <span class=\"term\" id=\"term_init%20statement\">init statement</span>, written <span class=\"snip\"><a href=\"/rsh/appinit/#rsh_init\" title=\"rsh: init\"><span style=\"color: #6F42C1\">init</span></a><span style=\"color: #24292E\">();</span></span>, finalizes all of the available participants, views, and compilation options.<a href=\"#p_2\" class=\"pid\">2</a></p>\n<p>\n  <i id=\"p_3\" class=\"pid\"></i><span class=\"ref\" id=\"rsh_deploy\" data-scope=\"rsh\" data-symbol=\"deploy\"></span>In earlier versions of Reach, this was called <span class=\"snip\"><a href=\"/rsh/appinit/#rsh_deploy\" title=\"rsh: deploy\"><span style=\"color: #6F42C1\">deploy</span></a><span style=\"color: #24292E\">()</span></span>, but it was\n  changed because that name was misleading.<a href=\"#p_3\" class=\"pid\">3</a>\n</p>\n<p>\n  <i id=\"p_4\" class=\"pid\"></i>Its continuation is a step, which means its content is specified by <a href=\"/rsh/step/#ref-programs-step\">Steps</a>.\n  It represents the body of the DApp to be compiled.<a href=\"#p_4\" class=\"pid\">4</a>\n</p>\n<h3 id=\"setoptions\" class=\"refHeader\"><code>setOptions</code><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#setoptions\"><span class=\"icon icon-link\"></span></a></h3>\n<p><span class=\"ref\" id=\"rsh_setOptions\" data-scope=\"rsh\" data-symbol=\"setOptions\"></span></p>\n<pre class=\"snippet numbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"setOptions({ verifyArithmetic: true });\nsetOptions({});\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\"><a href=\"/rsh/appinit/#rsh_setOptions\" title=\"rsh: setOptions\"><span style=\"color: #6F42C1\">setOptions</span></a><span style=\"color: #24292E\">({ verifyArithmetic: </span><a href=\"/rsh/compute/#rsh_true\" title=\"rsh: true\"><span style=\"color: #005CC5\">true</span></a><span style=\"color: #24292E\"> });</span></li><li value=\"2\"><a href=\"/rsh/appinit/#rsh_setOptions\" title=\"rsh: setOptions\"><span style=\"color: #6F42C1\">setOptions</span></a><span style=\"color: #24292E\">({});</span></li></ol></pre>\n<p><i id=\"p_5\" class=\"pid\"></i>The <span class=\"term\" id=\"term_compilation%20options\">compilation options</span> for the DApp may be set by calling <span class=\"snip\"><a href=\"/rsh/appinit/#rsh_setOptions\" title=\"rsh: setOptions\"><span style=\"color: #6F42C1\">setOptions</span></a><span style=\"color: #24292E\">(</span><span style=\"color: #005CC5\">OBJ_EXPR</span><span style=\"color: #24292E\">);</span></span> where <span class=\"snip\"><span style=\"color: #005CC5\">OBJ_EXPR</span></span> is an object with the following keys and values:<a href=\"#p_5\" class=\"pid\">5</a></p>\n<ul>\n  <li><i id=\"p_6\" class=\"pid\"></i><span class=\"ref\" id=\"rsh_verifyArithmetic\" data-scope=\"rsh\" data-symbol=\"verifyArithmetic\"></span><span class=\"snip\"><a href=\"/rsh/appinit/#rsh_verifyArithmetic\" title=\"rsh: verifyArithmetic\"><span style=\"color: #24292E\">verifyArithmetic</span></a></span><a href=\"#p_6\" class=\"pid\">6</a></li>\n</ul>\n<p><i id=\"p_7\" class=\"pid\"></i><span class=\"snip\"><a href=\"/rsh/compute/#rsh_true\" title=\"rsh: true\"><span style=\"color: #005CC5\">true</span></a></span> or <span class=\"snip\"><a href=\"/rsh/compute/#rsh_false\" title=\"rsh: false\"><span style=\"color: #005CC5\">false</span></a></span> (default)<a href=\"#p_7\" class=\"pid\">7</a></p>\n<p>\n  <i id=\"p_8\" class=\"pid\"></i>Determines whether arithmetic operations automatically introduce static assertions that they do not overflow beyond <span class=\"snip\"><span style=\"color: #24292E\">UInt.max</span></span>.\n  This defaults to <span class=\"snip\"><a href=\"/rsh/compute/#rsh_false\" title=\"rsh: false\"><span style=\"color: #005CC5\">false</span></a></span>, because it is onerous to verify.\n  We recommend turning it on before final deployment, but leaving it off during development.\n  When it is <span class=\"snip\"><a href=\"/rsh/compute/#rsh_false\" title=\"rsh: false\"><span style=\"color: #005CC5\">false</span></a></span>, connectors will ensure that overflows do not actually occur on the network.<a href=\"#p_8\" class=\"pid\">8</a>\n</p>\n<ul>\n  <li><i id=\"p_9\" class=\"pid\"></i><span class=\"ref\" id=\"rsh_verifyPerConnector\" data-scope=\"rsh\" data-symbol=\"verifyPerConnector\"></span><span class=\"snip\"><a href=\"/rsh/appinit/#rsh_verifyPerConnector\" title=\"rsh: verifyPerConnector\"><span style=\"color: #24292E\">verifyPerConnector</span></a></span><a href=\"#p_9\" class=\"pid\">9</a></li>\n</ul>\n<p><i id=\"p_10\" class=\"pid\"></i><span class=\"snip\"><a href=\"/rsh/compute/#rsh_true\" title=\"rsh: true\"><span style=\"color: #005CC5\">true</span></a></span> or <span class=\"snip\"><a href=\"/rsh/compute/#rsh_false\" title=\"rsh: false\"><span style=\"color: #005CC5\">false</span></a></span> (default)<a href=\"#p_10\" class=\"pid\">10</a></p>\n<p>\n  <i id=\"p_11\" class=\"pid\"></i>Determines whether verification is done per connector, or once for a generic connector.\n  When this is <span class=\"snip\"><a href=\"/rsh/compute/#rsh_true\" title=\"rsh: true\"><span style=\"color: #005CC5\">true</span></a></span>, then connector-specific constants, like <span class=\"snip\"><span style=\"color: #24292E\">UInt.max</span></span>, will be instantiated to literal numbers.\n  This concretization of these constants can induce performance degradation in the verifier.<a href=\"#p_11\" class=\"pid\">11</a>\n</p>\n<ul>\n  <li><i id=\"p_12\" class=\"pid\"></i><span class=\"ref\" id=\"rsh_connectors\" data-scope=\"rsh\" data-symbol=\"connectors\"></span><span class=\"snip\"><a href=\"/rsh/appinit/#rsh_connectors\" title=\"rsh: connectors\"><span style=\"color: #24292E\">connectors</span></a></span><a href=\"#p_12\" class=\"pid\">12</a></li>\n</ul>\n<p><i id=\"p_13\" class=\"pid\"></i><span class=\"ref\" id=\"rsh_ETH\" data-scope=\"rsh\" data-symbol=\"ETH\"></span><span class=\"ref\" id=\"rsh_ALGO\" data-scope=\"rsh\" data-symbol=\"ALGO\"></span><span class=\"snip\"><span style=\"color: #24292E\">[</span><a href=\"/rsh/appinit/#rsh_ETH\" title=\"rsh: ETH\"><span style=\"color: #005CC5\">ETH</span></a><span style=\"color: #24292E\">, </span><a href=\"/rsh/appinit/#rsh_ALGO\" title=\"rsh: ALGO\"><span style=\"color: #005CC5\">ALGO</span></a><span style=\"color: #24292E\">]</span></span> (default)<a href=\"#p_13\" class=\"pid\">13</a></p>\n<p>\n  <i id=\"p_14\" class=\"pid\"></i>A tuple of the connectors that the application should be compiled for.\n  By default, all available connectors are chosen.<a href=\"#p_14\" class=\"pid\">14</a>\n</p>\n<h2 id=\"ref-programs-appinit-exprs\" class=\"refHeader\">Expressions<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#ref-programs-appinit-exprs\"><span class=\"icon icon-link\"></span></a></h2>\n<p>\n  <i id=\"p_15\" class=\"pid\"></i>Any expressions valid for a <a href=\"/rsh/appinit/#ref-programs-appinit-exprs\">computation</a> are valid for application initialization.\n  However, some additional expressions are allowed.<a href=\"#p_15\" class=\"pid\">15</a>\n</p>\n<h3 id=\"participant-definition\" class=\"refHeader\">Participant Definition<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#participant-definition\"><span class=\"icon icon-link\"></span></a></h3>\n<p><i id=\"p_16\" class=\"pid\"></i>A participant and participant class may be declared with<a href=\"#p_16\" class=\"pid\">16</a></p>\n<p><span class=\"ref\" id=\"rsh_Participant\" data-scope=\"rsh\" data-symbol=\"Participant\"></span></p>\n<pre class=\"snippet unnumbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"Participant(participantName, participantInteractInterface)\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\"><a href=\"/rsh/appinit/#rsh_Participant\" title=\"rsh: Participant\"><span style=\"color: #6F42C1\">Participant</span></a><span style=\"color: #24292E\">(participantName, participantInteractInterface)</span></li></ol></pre>\n<p><i id=\"p_17\" class=\"pid\"></i>and<a href=\"#p_17\" class=\"pid\">17</a></p>\n<p><span class=\"ref\" id=\"rsh_ParticipantClass\" data-scope=\"rsh\" data-symbol=\"ParticipantClass\"></span></p>\n<pre class=\"snippet unnumbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"ParticipantClass(participantName, participantInteractInterface)\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\"><a href=\"/rsh/appinit/#rsh_ParticipantClass\" title=\"rsh: ParticipantClass\"><span style=\"color: #6F42C1\">ParticipantClass</span></a><span style=\"color: #24292E\">(participantName, participantInteractInterface)</span></li></ol></pre>\n<p><i id=\"p_18\" class=\"pid\"></i>respectively.<a href=\"#p_18\" class=\"pid\">18</a></p>\n<p>\n  <i id=\"p_19\" class=\"pid\"></i><span class=\"snip\"><span style=\"color: #24292E\">participantName</span></span> is a string which indicates the name of the participant function in the generated backend code.\n  Each <span class=\"snip\"><span style=\"color: #24292E\">participantName</span></span> must be unique.<a href=\"#p_19\" class=\"pid\">19</a>\n</p>\n<p><i id=\"p_20\" class=\"pid\"></i><span class=\"snip\"><span style=\"color: #24292E\">participantInteractInterface</span></span> is a <span class=\"term\" id=\"term_participant%20interact%20interface\">participant interact interface</span>, an object where each field indicates the type of a function or value which must be provided to the backend by the frontend for interacting with the participant.<a href=\"#p_20\" class=\"pid\">20</a></p>\n<h3 id=\"ref-programs-appinit-api\" class=\"refHeader\">API Definition<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#ref-programs-appinit-api\"><span class=\"icon icon-link\"></span></a></h3>\n<p><span class=\"ref\" id=\"rsh_API\" data-scope=\"rsh\" data-symbol=\"API\"></span></p>\n<pre class=\"snippet numbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"API('Voter', { vote: Fun([Address], UInt) })\n// or\nAPI({ vote: Fun([Address], UInt) })\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\"><a href=\"/rsh/appinit/#rsh_API\" title=\"rsh: API\"><span style=\"color: #6F42C1\">API</span></a><span style=\"color: #24292E\">(</span><span style=\"color: #032F62\">'Voter'</span><span style=\"color: #24292E\">, { vote: </span><a href=\"/rsh/compute/#rsh_Fun\" title=\"rsh: Fun\"><span style=\"color: #6F42C1\">Fun</span></a><span style=\"color: #24292E\">([Address], UInt) })</span></li><li value=\"2\"><span style=\"color: #6A737D\">// or</span></li><li value=\"3\"><a href=\"/rsh/appinit/#rsh_API\" title=\"rsh: API\"><span style=\"color: #6F42C1\">API</span></a><span style=\"color: #24292E\">({ vote: </span><a href=\"/rsh/compute/#rsh_Fun\" title=\"rsh: Fun\"><span style=\"color: #6F42C1\">Fun</span></a><span style=\"color: #24292E\">([Address], UInt) })</span></li></ol></pre>\n<p>\n  <i id=\"p_21\" class=\"pid\"></i>An API is defined with <span class=\"snip\"><a href=\"/rsh/appinit/#rsh_API\" title=\"rsh: API\"><span style=\"color: #6F42C1\">API</span></a><span style=\"color: #24292E\">(apiName, apiInterface)</span></span> or <span class=\"snip\"><a href=\"/rsh/appinit/#rsh_API\" title=\"rsh: API\"><span style=\"color: #6F42C1\">API</span></a><span style=\"color: #24292E\">(apiInterface)</span></span>, where <span class=\"snip\"><span style=\"color: #24292E\">apiName</span></span> is a string that labels the API and <span class=\"snip\"><span style=\"color: #24292E\">apiInterface</span></span> is an object where each field indicates the type of a function provided by the contract as an API.\n  These APIs are available in frontends via the <span class=\"snip\"><span style=\"color: #24292E\">ctc.apis</span></span> object, wherein fields are the members of <span class=\"snip\"><span style=\"color: #24292E\">apiInterface</span></span> and may be used in <span class=\"snip\"><span style=\"color: #24292E\">.api</span></span> components of <span class=\"snip\"><a href=\"/rsh/step/#rsh_fork\" title=\"rsh: fork\"><span style=\"color: #24292E\">fork</span></a></span> and <span class=\"snip\"><a href=\"/rsh/consensus/#rsh_parallelReduce\" title=\"rsh: parallelReduce\"><span style=\"color: #24292E\">parallelReduce</span></a></span> to specify the behavior of the corresponding call.\n  These are called <span class=\"term\" id=\"term_API%20member%20function\">API member function</span>s.\n  Each function must occur exactly once in the entire program.<a href=\"#p_21\" class=\"pid\">21</a>\n</p>\n<h3 id=\"ref-programs-appinit-view\" class=\"refHeader\">View Definition<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#ref-programs-appinit-view\"><span class=\"icon icon-link\"></span></a></h3>\n<div class=\"note\">\n  <p><i id=\"p_22\" class=\"pid\"></i>This section is about defining views during application initialization. Views are <a href=\"/rsh/consensus/#ref-programs-consensus-view\">set in consensus steps</a>, in your Reach program. But, they are <a href=\"/frontend/#ref-frontends-js-ctc\">accessed by frontends</a> by using the Reach standard library of the frontend language, such as JavaScript.<a href=\"#p_22\" class=\"pid\">22</a></p>\n</div>\n<p><span class=\"ref\" id=\"rsh_View\" data-scope=\"rsh\" data-symbol=\"View\"></span></p>\n<pre class=\"snippet numbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"View('NFT', { owner: Address })\n// or\nView({ owner: Address })\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\"><a href=\"/rsh/appinit/#rsh_View\" title=\"rsh: View\"><span style=\"color: #6F42C1\">View</span></a><span style=\"color: #24292E\">(</span><span style=\"color: #032F62\">'NFT'</span><span style=\"color: #24292E\">, { owner: Address })</span></li><li value=\"2\"><span style=\"color: #6A737D\">// or</span></li><li value=\"3\"><a href=\"/rsh/appinit/#rsh_View\" title=\"rsh: View\"><span style=\"color: #6F42C1\">View</span></a><span style=\"color: #24292E\">({ owner: Address })</span></li></ol></pre>\n<p>\n  <i id=\"p_23\" class=\"pid\"></i>A view is defined with <span class=\"snip\"><a href=\"/rsh/appinit/#rsh_View\" title=\"rsh: View\"><span style=\"color: #6F42C1\">View</span></a><span style=\"color: #24292E\">(viewName, viewInterface)</span></span> or <span class=\"snip\"><a href=\"/rsh/appinit/#rsh_View\" title=\"rsh: View\"><span style=\"color: #6F42C1\">View</span></a><span style=\"color: #24292E\">(viewInterface)</span></span>, where <span class=\"snip\"><span style=\"color: #24292E\">viewName</span></span> is a string that labels the view and <span class=\"snip\"><span style=\"color: #24292E\">viewInterface</span></span> is an object where each field indicates the type of a function or value provided by the contract associated with the specified DApp.\n  These views are available in frontends via the <span class=\"snip\"><span style=\"color: #24292E\">ctc.views</span></span> object.\n  In the DApp, the result of this application argument is referred to as a view object.<a href=\"#p_23\" class=\"pid\">23</a>\n</p>\n<h3 id=\"ref-programs-appinit-events\" class=\"refHeader\">Events Definition<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#ref-programs-appinit-events\"><span class=\"icon icon-link\"></span></a></h3>\n<p><span class=\"ref\" id=\"rsh_Events\" data-scope=\"rsh\" data-symbol=\"Events\"></span></p>\n<pre class=\"snippet numbered\"><div class=\"codeHeader\">&nbsp;<a class=\"far fa-copy copyBtn\" data-clipboard-text=\"Events('Logger', {\n  log: [UInt, Byte(64)]\n})\n// or\nEvents({\n  log: [UInt, Byte(64)]\n})\" href=\"#\"></a></div><ol class=\"snippet\"><li value=\"1\"><a href=\"/rsh/appinit/#rsh_Events\" title=\"rsh: Events\"><span style=\"color: #6F42C1\">Events</span></a><span style=\"color: #24292E\">(</span><span style=\"color: #032F62\">'Logger'</span><span style=\"color: #24292E\">, {</span></li><li value=\"2\"><span style=\"color: #24292E\">  log: [UInt, </span><span style=\"color: #6F42C1\">Byte</span><span style=\"color: #24292E\">(</span><span style=\"color: #005CC5\">64</span><span style=\"color: #24292E\">)]</span></li><li value=\"3\"><span style=\"color: #24292E\">})</span></li><li value=\"4\"><span style=\"color: #6A737D\">// or</span></li><li value=\"5\"><a href=\"/rsh/appinit/#rsh_Events\" title=\"rsh: Events\"><span style=\"color: #6F42C1\">Events</span></a><span style=\"color: #24292E\">({</span></li><li value=\"6\"><span style=\"color: #24292E\">  log: [UInt, </span><span style=\"color: #6F42C1\">Byte</span><span style=\"color: #24292E\">(</span><span style=\"color: #005CC5\">64</span><span style=\"color: #24292E\">)]</span></li><li value=\"7\"><span style=\"color: #24292E\">})</span></li></ol></pre>\n<p>\n  <i id=\"p_24\" class=\"pid\"></i>An event is defined with <span class=\"snip\"><a href=\"/rsh/appinit/#rsh_Events\" title=\"rsh: Events\"><span style=\"color: #6F42C1\">Events</span></a><span style=\"color: #24292E\">(eventName, eventInterface)</span></span> or <span class=\"snip\"><a href=\"/rsh/appinit/#rsh_Events\" title=\"rsh: Events\"><span style=\"color: #6F42C1\">Events</span></a><span style=\"color: #24292E\">(eventInterface)</span></span>, where <span class=\"snip\"><span style=\"color: #24292E\">eventName</span></span> is a string that labels the event and <span class=\"snip\"><span style=\"color: #24292E\">eventInterface</span></span> is an object where each field is a <span class=\"snip\"><a href=\"/rsh/compute/#rsh_Tuple\" title=\"rsh: Tuple\"><span style=\"color: #24292E\">Tuple</span></a></span> of <span class=\"snip\"><span style=\"color: #24292E\">Type</span></span>s, representing the type of values that an event will emit.\n  These events are available in the frontends via the <span class=\"snip\"><span style=\"color: #24292E\">ctc.events</span></span> object.\n  In the DApp, the result of this application argument is referred to as an event object.<a href=\"#p_24\" class=\"pid\">24</a>\n</p>","<ul><li class=\"dynamic\">\n    <a href=\"#ref-programs-appinit\">Application Initialization</a>\n    <ul class=\"dynamic\">\n      <li class=\"dynamic\">\n        <a href=\"#ref-programs-appinit-stmts\">Statements</a>\n        <ul class=\"dynamic\">\n          <li class=\"dynamic\"><a href=\"#init\"><code>init</code></a></li>\n          <li class=\"dynamic\"><a href=\"#setoptions\"><code>setOptions</code></a></li>\n        </ul>\n      </li>\n      <li class=\"dynamic\">\n        <a href=\"#ref-programs-appinit-exprs\">Expressions</a>\n        <ul class=\"dynamic\">\n          <li class=\"dynamic\"><a href=\"#participant-definition\">Participant Definition</a></li>\n          <li class=\"dynamic\"><a href=\"#ref-programs-appinit-api\">API Definition</a></li>\n          <li class=\"dynamic\"><a href=\"#ref-programs-appinit-view\">View Definition</a></li>\n          <li class=\"dynamic\"><a href=\"#ref-programs-appinit-events\">Events Definition</a></li>\n        </ul>\n      </li>\n    </ul>\n  </li></ul>"]